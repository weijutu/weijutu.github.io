<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/cube_logo_v2.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/cube_logo_v2.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/cube_logo_v2.png">
  <link rel="mask-icon" href="/images/cube_logo_v2.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/yellow/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"weijutu.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="天天吃番茄，天天有進步">
<meta property="og:type" content="blog">
<meta property="og:title" content="丸匠筆記">
<meta property="og:url" content="https://weijutu.github.io/page/7/index.html">
<meta property="og:site_name" content="丸匠筆記">
<meta property="og:description" content="天天吃番茄，天天有進步">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Helen">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://weijutu.github.io/page/7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-TW","comments":"","permalink":"","path":"page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>丸匠筆記</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-72890173-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-72890173-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">丸匠筆記</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">a > 1, a ^ n = ∞</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>關於</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Helen"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">Helen</p>
  <div class="site-description" itemprop="description">天天吃番茄，天天有進步</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">78</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/weijutu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;weijutu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="回到頂端">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-14-middleware/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-14-middleware/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#14 - middleware 應用與開發</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:14:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:14:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>從我們前幾篇用到 express web framework 框架的時候，express 就已經內建啟用 middleware 的概念，可以利用中間層的這個部分做一些效果，接下來本章節就來介紹  middleware 。首先我們先建立好一個 express web framework 框架</p>
<p>建立 express 的指令是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$express</span> -e nodejs-middleware</span><br></pre></td></tr></table></figure>


<p>並且打開 app.js 檔案</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> favicon = <span class="built_in">require</span>(<span class="string">&#x27;static-favicon&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> logger = <span class="built_in">require</span>(<span class="string">&#x27;morgan&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> routes = <span class="built_in">require</span>(<span class="string">&#x27;./routes/index&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> users = <span class="built_in">require</span>(<span class="string">&#x27;./routes/users&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// view engine setup</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&#x27;views&#x27;</span>, path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;views&#x27;</span>));</span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;ejs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">favicon</span>());</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">logger</span>(<span class="string">&#x27;dev&#x27;</span>));</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">json</span>());</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>());</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cookieParser</span>());</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;public&#x27;</span>)));</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>, routes);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/users&#x27;</span>, users);</span><br><span class="line"></span><br><span class="line"><span class="comment">/// catch 404 and forward to error handler</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> err = <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Not Found&#x27;</span>);</span><br><span class="line">    err.<span class="property">status</span> = <span class="number">404</span>;</span><br><span class="line">    <span class="title function_">next</span>(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/// error handlers</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// development error handler</span></span><br><span class="line"><span class="comment">// will print stacktrace</span></span><br><span class="line"><span class="keyword">if</span> (app.<span class="title function_">get</span>(<span class="string">&#x27;env&#x27;</span>) === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">err, req, res, next</span>) &#123;</span><br><span class="line">        res.<span class="title function_">status</span>(err.<span class="property">status</span> || <span class="number">500</span>);</span><br><span class="line">        res.<span class="title function_">render</span>(<span class="string">&#x27;error&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">message</span>: err.<span class="property">message</span>,</span><br><span class="line">            <span class="attr">error</span>: err</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// production error handler</span></span><br><span class="line"><span class="comment">// no stacktraces leaked to user</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">err, req, res, next</span>) &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(err.<span class="property">status</span> || <span class="number">500</span>);</span><br><span class="line">    res.<span class="title function_">render</span>(<span class="string">&#x27;error&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">message</span>: err.<span class="property">message</span>,</span><br><span class="line">        <span class="attr">error</span>: &#123;&#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = app;</span><br></pre></td></tr></table></figure>

<p>從上面建立的  express 框架可以看到這裡用了許多的 app.use 的方法，包含靜態檔案、body 解析器、路由機制。當預設 middleware 之後，每當瀏覽器收到連線要求的時候，middleware 就會被呼叫啟用。簡單來講 middleware 就像一個薄薄的一層過濾網</p>
<h1 id="建立-middleware"><a href="#建立-middleware" class="headerlink" title="建立 middleware"></a>建立 middleware</h1><p>由於基本設定接已經有提供高效能的套件，其 express  所建立好的 middleware 設定之外，也可以自定撰寫 middleware 安排到基本設定流程當中，我們建立一個簡單的 middleware 功能，請在 app.js 安插以下程式：</p>
<p><img data-src="/images/nodejs/58.png"></p>
<p>一開始先建立一個 middleHandler ，其基本參數有  request, response, next，而  next方法 是代表交給下一個 middleware 繼續作處理，接著在建立 app.get ，我們預期要從瀏覽器  &#x2F;test ㄙㄟ來做請求，第二個參數為 middleHandler function ，以及第三個 callback 函式</p>
<p><img data-src="/images/nodejs/59.png"></p>
<p>一開始從瀏覽器 localhost:3000&#x2F;test 發送出去之後，會先進到 middleHandler ，所以會先顯示 <strong>start</strong> :: middle handler function ，然後遇到  next(); 之後再回到 app.get  繼續作處理，因此再將 <strong>end</strong> :: middle handler function 顯示，最後用了一個 res.send 方法將一個小字串文字直接輸出到瀏覽器上面。</p>
<h1 id="下圖可看結果："><a href="#下圖可看結果：" class="headerlink" title="下圖可看結果："></a>下圖可看結果：</h1><p><img data-src="/images/nodejs/60.png"></p>
<p>更多應用，下回待續…</p>
<p>參考資料：<br><a target="_blank" rel="noopener" href="http://stephensugden.com/middleware_guide/">http://stephensugden.com/middleware_guide/</a><br><a target="_blank" rel="noopener" href="http://www.hacksparrow.com/how-to-write-midddleware-for-connect-express-js.html">http://www.hacksparrow.com/how-to-write-midddleware-for-connect-express-js.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-13-fs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-13-fs/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#13 - 核心模組檔案系統 fs</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:13:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:13:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>node.js  提供了檔案操作的模組，包含讀取、刪除、寫入、更名等等的檔案操作。其中 fs 模組他還提供了同步與非同步的方法來使用。他的方法名稱也相當好懂，如果是非同步那麼就 fs.readFile() ，同步的話就是 fs.readFileSync()，相當好區別。本章節將會介紹檔案系統的基本操作，如：</p>
<ul>
<li>讀取檔案 fs.readFile</li>
<li>寫入檔案 fs.writeFile</li>
<li>附加檔案內容 fs.appendFile</li>
<li>更名檔案 fs.rename</li>
<li>刪除檔案 fs.unlink</li>
</ul>
<p>首先我們先建立一個 nodejs-fs 目錄夾，預設檔案結構如下：</p>
<p><img data-src="/images/nodejs/57.png"></p>
<p>content.txt , test.txt 簡單預設寫一些內文，就可以進行以下的檔案系統相關操作：</p>
<p>在操作的宣告裡面，在 index.js 檔案，首先務必要檔案檔案系統模組</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>接著我們就可以使用 fs 所提供的方法，方法可參考 <a target="_blank" rel="noopener" href="http://nodejs.org/api/fs.html">http://nodejs.org/api/fs.html</a>：</p>
<h1 id="讀取檔案-fs-readFile"><a href="#讀取檔案-fs-readFile" class="headerlink" title="讀取檔案 fs.readFile"></a>讀取檔案 fs.readFile</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>); <span class="comment">//載入檔案系統模組</span></span><br><span class="line"><span class="comment">//讀取  content.txt 檔案內容</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;content.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">     <span class="comment">//若有錯誤就列印訊息</span></span><br><span class="line">     <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//將檔案內容輸入</span></span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="寫入檔案-fs-writeFile"><a href="#寫入檔案-fs-writeFile" class="headerlink" title="寫入檔案 fs.writeFile"></a>寫入檔案 fs.writeFile</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data1 = <span class="string">&quot;hello, ithome 鐵人賽&quot;</span>;</span><br><span class="line">fs.<span class="title function_">writeFile</span>(__dirname + <span class="string">&#x27;/content.txt&#x27;</span>, data1, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">     <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">     &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="附加檔案內容-fs-appendFile"><a href="#附加檔案內容-fs-appendFile" class="headerlink" title="附加檔案內容 fs.appendFile"></a>附加檔案內容 fs.appendFile</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data2 = <span class="string">&quot;的主計林車修該自是&quot;</span>;</span><br><span class="line">fs.<span class="title function_">appendFile</span>(__dirname + <span class="string">&#x27;/content.txt&#x27;</span>, data2, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">     <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">     &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="更名檔案-fs-rename"><a href="#更名檔案-fs-rename" class="headerlink" title="更名檔案 fs.rename"></a>更名檔案 fs.rename</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oldpath = <span class="string">&quot;content2.txt&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newpath = <span class="string">&quot;content.txt&quot;</span>;</span><br><span class="line">fs.<span class="title function_">rename</span>(oldpath, newpath, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">     <span class="keyword">if</span> (err)</span><br><span class="line">          <span class="keyword">throw</span> err;</span><br><span class="line"></span><br><span class="line">       fs.<span class="title function_">stat</span>(<span class="string">&#x27;content.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, stats</span>) &#123;</span><br><span class="line">         <span class="keyword">if</span> (err)</span><br><span class="line">              <span class="keyword">throw</span> err;</span><br><span class="line"></span><br><span class="line">         <span class="comment">//將檔案的狀態顯示出來</span></span><br><span class="line">          <span class="comment">// stats: &#123;&quot;dev&quot;:16777218,</span></span><br><span class="line">         <span class="comment">//      &quot;mode&quot;:33204,</span></span><br><span class="line">         <span class="comment">//      &quot;nlink&quot;:1,</span></span><br><span class="line">         <span class="comment">//      &quot;uid&quot;:501,</span></span><br><span class="line">         <span class="comment">//      &quot;gid&quot;:20,</span></span><br><span class="line">         <span class="comment">//      &quot;rdev&quot;:0,&quot;blksize&quot;:4096,</span></span><br><span class="line">         <span class="comment">//      &quot;ino&quot;:33307834,</span></span><br><span class="line">         <span class="comment">//      &quot;size&quot;:1254,</span></span><br><span class="line">         <span class="comment">//      &quot;blocks&quot;:8,</span></span><br><span class="line">         <span class="comment">//      &quot;atime&quot;:&quot;2014-10-21T14:25:18.000Z&quot;,</span></span><br><span class="line">         <span class="comment">//      &quot;mtime&quot;:&quot;2014-10-21T14:24:56.000Z&quot;,</span></span><br><span class="line">         <span class="comment">//      &quot;ctime&quot;:&quot;2014-10-21T14:24:56.000Z&quot;</span></span><br><span class="line">         <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;stats: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(stats));</span><br><span class="line">       &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="刪除檔案-fs-unlink"><a href="#刪除檔案-fs-unlink" class="headerlink" title="刪除檔案 fs.unlink"></a>刪除檔案 fs.unlink</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">unlink</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;successfully deleted test.txt&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>事實上檔案系統操作還有很多方法可以使用，可以看到我們</p>
<h1 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h1><ul>
<li><a target="_blank" rel="noopener" href="http://nodejs.org/api/fs.html">http://nodejs.org/api/fs.html</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-12-nodemailer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-12-nodemailer/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#12 - 使用 nodemailer 套件透過 gmail 發送電子信箱</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:12:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:12:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在上幾篇完成了 mysql  的 CRUD 的四大操作，本篇就來個輕鬆一點的應用，在這篇介紹使用 nodemailer 套件透過  gmail 來發送電子信箱，在安裝跟實作上也相當容易，我們透過 <a target="_blank" rel="noopener" href="https://github.com/andris9/Nodemailer">https://github.com/andris9/Nodemailer</a> 來講解，在運用上也無需再重新打造輪子，學習如何使用即可。</p>
<p>在這邊先建立一個目錄夾 nodejs-nodemailer ，接著再指令將 package.json 建立起來 （本篇不著重在如何建立 package.json ，如需安裝操作請見 <a target="_blank" rel="noopener" href="http://ithelp.ithome.com.tw/ironman7/app/article/all/recent/10158140">http://ithelp.ithome.com.tw/ironman7/app/article/all/recent/10158140</a> ）。由於我們要安裝 nodemailer 套件，因此下指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> install —save node mailer</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/52.png"></p>
<p>其中 —save 會將 nodemailer 相依套件新增到 package.json 檔案裡的 dependencies 項目裡， 如下圖所示：</p>
<p><img data-src="/images/nodejs/53.png"></p>
<p>安裝完成之後，我們就可以來寫程式的部分了，可以看到上圖寫的 “start”: “node email” ，在這邊我預定起始點是用 email.js ，因此請在根目錄下建立 email.js 檔案。我們初步的思考是這樣：</p>
<ul>
<li>引入 nodemailer 套件</li>
<li>宣告發信的物件 （服務採用 gmail）</li>
<li>基本參數設定 (包含內文)</li>
<li>送出發信事件</li>
</ul>
<p>我們直接看一下程式的部分：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用 nodemailer</span></span><br><span class="line"><span class="keyword">var</span> nodemailer = <span class="built_in">require</span>(<span class="string">&#x27;nodemailer&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//宣告發信物件</span></span><br><span class="line"><span class="keyword">var</span> transporter = nodemailer.<span class="title function_">createTransport</span>(&#123;</span><br><span class="line">    <span class="attr">service</span>: <span class="string">&#x27;Gmail&#x27;</span>,</span><br><span class="line">    <span class="attr">auth</span>: &#123;</span><br><span class="line">        <span class="attr">user</span>: ‘account@gmail.<span class="property">com</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        pass: ‘yourpassword&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">    <span class="comment">//寄件者</span></span><br><span class="line">    <span class="attr">from</span>: <span class="string">&#x27;account1@gmail.com &#x27;</span>,</span><br><span class="line">    <span class="comment">//收件者</span></span><br><span class="line">    <span class="attr">to</span>: <span class="string">&#x27;account2@gmail.com&#x27;</span>,</span><br><span class="line">    <span class="comment">//副本</span></span><br><span class="line">    <span class="attr">cc</span>: <span class="string">&#x27;account3@gmail.com&#x27;</span>,</span><br><span class="line">    <span class="comment">//密件副本</span></span><br><span class="line">    <span class="attr">bcc</span>: <span class="string">&#x27;account4@gmail.com&#x27;</span>,</span><br><span class="line">    <span class="comment">//主旨</span></span><br><span class="line">    <span class="attr">subject</span>: <span class="string">&#x27;這是 node.js 發送的測試信件&#x27;</span>, <span class="comment">// Subject line</span></span><br><span class="line">    <span class="comment">//純文字</span></span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;Hello world2&#x27;</span>, <span class="comment">// plaintext body</span></span><br><span class="line">    <span class="comment">//嵌入 html 的內文</span></span><br><span class="line">    <span class="attr">html</span>: <span class="string">&#x27;&lt;h2&gt;Why and How&lt;/h2&gt; &lt;p&gt;The &lt;a href=&quot;http://en.wikipedia.org/wiki/Lorem_ipsum&quot; title=&quot;Lorem ipsum - Wikipedia, the free encyclopedia&quot;&gt;Lorem ipsum&lt;/a&gt; text is typically composed of pseudo-Latin words. It is commonly used as placeholder text to examine or demonstrate the visual effects of various graphic design. Since the text itself is meaningless, the viewers are therefore able to focus on the overall layout without being attracted to the text.&lt;/p&gt;&#x27;</span>,</span><br><span class="line">    <span class="comment">//附件檔案</span></span><br><span class="line">    <span class="attr">attachments</span>: [ &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;text01.txt&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: <span class="string">&#x27;聯候家上去工的調她者壓工，我笑它外有現，血有到同，民由快的重觀在保導然安作但。護見中城備長結現給都看面家銷先然非會生東一無中；內他的下來最書的從人聲觀說的用去生我，生節他活古視心放十壓心急我我們朋吃，毒素一要溫市歷很爾的房用聽調就層樹院少了紀苦客查標地主務所轉，職計急印形。團著先參那害沒造下至算活現興質美是為使！色社影；得良灣……克卻人過朋天點招？不族落過空出著樣家男，去細大如心發有出離問歡馬找事&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;unnamed.jpg&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/Users/Weiju/Pictures/unnamed.jpg&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//發送信件方法</span></span><br><span class="line">transporter.<span class="title function_">sendMail</span>(options, <span class="keyword">function</span>(<span class="params">error, info</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(error)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;訊息發送: &#x27;</span> + info.<span class="property">response</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>可以看到引入的 nodemailer 的是使用 nodemailer.createTransport 物件先建立好發信的服務 service 為 Gmail，並且透過 auth 建立 gmail 登入的帳號密碼，接著宣告一下收件者 （to）、副本（cc）、密件副本（bcc）、寄件者（from），當然還有主旨 (Subject)、內文(text, html)、附件檔案（attachments）</p>
<p>最後發信結果，就如   package.json 上的 scripts.start 指令，下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$node email</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/54.png"></p>
<p>此時，發送結果會如訊息所說，我們再看看信件收到的樣子，由於附件傳送了兩筆，可以看到  unnamed.jpg  及 text01.txt  已經接收到了</p>
<p><img data-src="/images/nodejs/55.png"></p>
<p>其中 text01.txt  是直接在程式上面輸入純文字，我們來看看是否有真的寫入：</p>
<p><img data-src="/images/nodejs/56.png"></p>
<p>更多應用，稍等回來～</p>
<h1 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h1><p><a target="_blank" rel="noopener" href="http://www.richyli.com/tool/loremipsum/">http://www.richyli.com/tool/loremipsum/</a><br><a target="_blank" rel="noopener" href="https://github.com/andris9/Nodemailer">https://github.com/andris9/Nodemailer</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-11-mysql-crud-update/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-11-mysql-crud-update/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#11 - MySQL 操作: 更新</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:11:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:11:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>上一篇完成了建立資料，本篇就來介紹更新的部分，我們在上一篇的使用者列表頁面上，每一筆資料的功能建立了一個『更新』的按鈕，如下：</p>
<p>在這使用者列表的部分，表格列出的語法是：</p>
<p><img data-src="/images/nodejs/67.png"></p>
<p>其中也就是在跑 each 時，每筆資料塞入按鈕語法，在這邊我們設定點選的時候連結 &#x2F;update 而後面再接一個編號參數 &#x2F;#{user.id}：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a(href=&#x27;/update/#&#123;user.id&#125;&#x27;, class=&#x27;btn btn-warning&#x27;) 更新</span><br></pre></td></tr></table></figure>

<p>我們簡單看一下表格佈局如下：</p>
<p><img data-src="/images/nodejs/47.png"></p>
<p>並且繼續打開 app.js 檔案，放上 update 的操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/update/:id&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    pool.<span class="title function_">getConnection</span>(<span class="keyword">function</span>(<span class="params">err, connection</span>) &#123;</span><br><span class="line">        connection.<span class="title function_">query</span>(<span class="string">&#x27;SELECT * from users where id=?&#x27;</span>,[req.<span class="property">params</span>.<span class="property">id</span>],<span class="keyword">function</span>(<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;search is success.&#x27;</span>);</span><br><span class="line">            res.<span class="title function_">render</span>(<span class="string">&#x27;create&#x27;</span>, &#123;</span><br><span class="line">                title : <span class="string">&#x27;Update user&#x27;</span>,</span><br><span class="line">                user : rows[<span class="number">0</span>]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        connection.<span class="title function_">release</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>在這邊先進入到 &#x2F;update 頁面，預定在打開 update 時，會列出某一筆資料，因此在這邊會先用 sql 語法來查詢某一筆資料，而 id 的部分由網址列的參數取得，也就是 connection.query 的方法的第二參數，是取得網址的參數 [req.params.id] ，完成取得動作之後，顯示在 create 的頁面 （由於上一篇新增的頁面跟本篇的更新頁面欄位相同，所以用的是一樣的頁面）</p>
<p>另外在 render 的參數多了一個 user: rows[0], 主要是用來判別是不是更新的資料，若有資料則是更新、若沒資料就是新增</p>
<p><img data-src="/images/nodejs/48.png"></p>
<p>每項  input 就用 user.[欄位] 將值帶入，顯示部分是：</p>
<p><img data-src="/images/nodejs/49.png"></p>
<p>我們按下儲存之後，將表單送到 &#x2F;update，因此這邊要做  update 的操作，再度打開 app.js 新增</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/update&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    pool.<span class="title function_">getConnection</span>(<span class="keyword">function</span>(<span class="params">err, connection</span>) &#123;</span><br><span class="line">        connection.<span class="title function_">query</span>(<span class="string">&#x27;update users set ? where id = ?&#x27;</span>, [&#123;</span><br><span class="line">            id : req.<span class="property">body</span>.<span class="property">user</span>.<span class="property">id</span>,</span><br><span class="line">            name : req.<span class="property">body</span>.<span class="property">user</span>.<span class="property">name</span>,</span><br><span class="line">            description : req.<span class="property">body</span>.<span class="property">user</span>.<span class="property">description</span></span><br><span class="line">        &#125;,req.<span class="property">body</span>.<span class="property">user</span>.<span class="property">id</span>], <span class="keyword">function</span>(<span class="params">err, fields</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;);</span><br><span class="line">        connection.<span class="title function_">query</span>(<span class="string">&#x27;SELECT * from users&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">            res.<span class="title function_">render</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">                title : <span class="string">&#x27;使用者列表&#x27;</span>,</span><br><span class="line">                user : rows</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        connection.<span class="title function_">release</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>其中以</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">connection.<span class="title function_">query</span>(<span class="string">&#x27;update users set ? where id = ?&#x27;</span>, [&#123;</span><br><span class="line">    id : req.<span class="property">body</span>.<span class="property">user</span>.<span class="property">id</span>,</span><br><span class="line">    name : req.<span class="property">body</span>.<span class="property">user</span>.<span class="property">name</span>,</span><br><span class="line">    description : req.<span class="property">body</span>.<span class="property">user</span>.<span class="property">description</span></span><br><span class="line">&#125;,req.<span class="property">body</span>.<span class="property">user</span>.<span class="property">id</span>], <span class="keyword">function</span>(<span class="params">err, fields</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err)</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>作為 update 的操作，在第二參數時，就是從表單傳送過來的資料，以陣列來表示，裏面每個欄位再以 key&#x2F;value 呈現，然後最後再</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">connection.<span class="title function_">query</span>(<span class="string">&#x27;SELECT * from users&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err)</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">    res.<span class="title function_">render</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">        title : <span class="string">&#x27;使用者列表&#x27;</span>,</span><br><span class="line">        user : rows</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>新增完成後顯示最後的結果列到使用者列表</p>
<p><img data-src="/images/nodejs/50.png"></p>
<p>結果退到使用者列表：</p>
<p><img data-src="/images/nodejs/51.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-10-mysql-crud-read/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-10-mysql-crud-read/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#10 - MySQL 操作: 查詢</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:10:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:10:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>上一篇介紹了資料庫連線的方式，接著我們就來實作從資料庫讀取資料出來的做法。資料庫的部分，假定先建立一個 demo_nodejs 的資料庫，並且建立 users 的資料表，其資料表有  id, name, description 欄位</p>
<p>我們用了 express web framework ＋ jade 來當作網站的框架，安裝 express 方式可以依照這篇 『使用 Express 實作網頁開發框架』 <a target="_blank" rel="noopener" href="http://ithelp.ithome.com.tw/ironman7/app/article/all/recent/10158306">http://ithelp.ithome.com.tw/ironman7/app/article/all/recent/10158306</a> ，不過在這篇範例當中，不使用 els 引擎，建立的時候直接下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$express</span> [專案名稱]</span><br></pre></td></tr></table></figure>

<p>主要我們要安裝的是  mysql ，因此就下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> install mysql</span><br></pre></td></tr></table></figure>

<p>接著請開啟  routes&#x2F;index.js 檔案，在這邊我們需要修改一下，讓這個 index 首頁，直接顯示資料庫的列表清單，首先是將剛裝好的 mysql 引用進來，並且用 db_option 物件來設定一下連線 mysql  參數，包含 host, user, password, database, port</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> db_option = &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">database</span>:<span class="string">&#x27;demo_nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3306</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>之後，在放一個 exports.index 函式來取得資料庫的資料</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">index</span> = <span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">     <span class="keyword">var</span> connection = mysql.<span class="title function_">createConnection</span>(db_option);</span><br><span class="line">     <span class="keyword">var</span> query =<span class="string">&#x27;SELECT * FROM users&#x27;</span>;</span><br><span class="line">    connection.<span class="title function_">query</span>(query, <span class="keyword">function</span>(<span class="params">err, rows, fields</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">        res.<span class="title function_">render</span>(<span class="string">&#x27;index&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;這是 mysql + node.js 示範版本&#x27;</span>, <span class="string">&#x27;items&#x27;</span>: rows &#125;);   </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到從 connection.query 方法取出來的結果，利用 callback function 的方式將查詢結果物件放在 rows，最後在 render index 的畫面時，把傳遞的物件放在自訂  json  格式的  items 裡</p>
<p><img data-src="/images/nodejs/44.png"></p>
<p>我們可以知道我們要傳遞的 view 位置是在  index ，因此進到  &#x2F;views&#x2F;index.jade 將畫面做一個簡單的呈現，在這邊是用了 bootstrap 的前端畫面。我預想著上面要有個  header，然後簡單的標頭文字，中間在擺放重要的表格資料，因此佈局上要有  navbar, 中間的  container，下圖為標頭部分</p>
<p><img data-src="/images/nodejs/45.png"></p>
<p>接這最重要的就是內文，在這邊用個  table 來佈局</p>
<p><img data-src="/images/nodejs/46.png"></p>
<p>接資料的部分，就是剛剛從 routes&#x2F;index.js 傳過來的 json 物件，其中有  items ，請使用 each 的方式跑迴圈</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-each user in items</span><br><span class="line">    tr</span><br><span class="line">        td(style=&quot;padding:20px&quot;)=user.id</span><br><span class="line">        td(style=&quot;padding:20px&quot;)=user.name</span><br><span class="line">        td(style=&quot;padding:20px&quot;)=user.description</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-09-mysql-crud-delete/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-09-mysql-crud-delete/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#9 - MySQL 操作: 刪除</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:09:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:09:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>前幾篇完成了 Create, Read, Update, 本篇將介紹 Delete 的操作，一樣的我們在使用者列表上面，每筆資料的功能加入『刪除』按鈕，在頁面上表格列出的語法是：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mixin users(users)</span><br><span class="line">  h1= title</span><br><span class="line">  fieldset</span><br><span class="line">   legend 以下是從 mysql 取出的使用者列表</span><br><span class="line">   a(href=&#x27;/create&#x27;, class=&#x27;btn btn-primary&#x27;) 新增使用者</span><br><span class="line">   table.mytable.table</span><br><span class="line">    th 編輯</span><br><span class="line">    th 名稱</span><br><span class="line">    th 描述</span><br><span class="line">    th 功能</span><br><span class="line">     each user in users</span><br><span class="line">      tr</span><br><span class="line">       td= user.id</span><br><span class="line">       td #&#123;user.name&#125;</span><br><span class="line">       td #&#123;user.description&#125;</span><br><span class="line">       td</span><br><span class="line">         a(href=&#x27;/update/#&#123;user.id&#125;&#x27;, class=&#x27;btn btn-warning&#x27;) 更新</span><br><span class="line">         a(href=&#x27;/delete/#&#123;user.id&#125;&#x27;, class=&#x27;btn btn-danger&#x27;) 刪除</span><br><span class="line"></span><br><span class="line"> - users = user</span><br><span class="line"> .container</span><br><span class="line">      mixin users(users)</span><br></pre></td></tr></table></figure>


<p>刪除部分的語法就是在按鈕點選的時候，連到 &#x2F;delete ，後面我們指定資料使用者的編號作為參數  &#x2F;#{user.id}</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a(href=&#x27;/delete/#&#123;user.id&#125;&#x27;, class=&#x27;btn btn-danger&#x27;) 刪除</span><br></pre></td></tr></table></figure>

<p>佈局如下：</p>
<p><img data-src="/images/nodejs/41.png"></p>
<p>開啓 app.js 補上 delete 的操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/delete/:id&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    pool.<span class="title function_">getConnection</span>(<span class="keyword">function</span>(<span class="params">err, connection</span>) &#123;</span><br><span class="line">        connection.<span class="title function_">query</span>(<span class="string">&#x27;delete from users  where id = ?&#x27;</span>, [req.<span class="property">params</span>.<span class="property">id</span>], <span class="keyword">function</span>(<span class="params">err, fields</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;);</span><br><span class="line">        connection.<span class="title function_">query</span>(<span class="string">&#x27;SELECT * from users&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">            res.<span class="title function_">render</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">                title : <span class="string">&#x27;使用者列表&#x27;</span>,</span><br><span class="line">                user : rows</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        connection.<span class="title function_">release</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>其中在程式的部分，在點選按鈕 &#x2F;delete 的時候，後面接 :id 也就是預定在網址列上面取得使用者編號的參數，然後再此刪除的部分以以下語法呈現：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">connection.<span class="title function_">query</span>(<span class="string">&#x27;delete from users  where id = ?&#x27;</span>, [req.<span class="property">params</span>.<span class="property">id</span>], <span class="keyword">function</span>(<span class="params">err, fields</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err)</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在 connection.query 方法裡的第二參數  [req.params.id]帶入網址列的參數，最後刪除完成後，再度顯示取得最新的使用者列表</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">connection.<span class="title function_">query</span>(<span class="string">&#x27;SELECT * from users&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err)</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">    res.<span class="title function_">render</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">        title : <span class="string">&#x27;使用者列表&#x27;</span>,</span><br><span class="line">        user : rows</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>在這邊我們刪掉第四筆資料</p>
<p><img data-src="/images/nodejs/42.png"></p>
<p>結果如下：</p>
<p><img data-src="/images/nodejs/43.png"></p>
<p>我們終於完成了 Create, Read, Update ,Delete 的 mysql 存取操作 ，完整的程式歡迎到這裡 fork 囉</p>
<p><a target="_blank" rel="noopener" href="https://github.com/weijutu/nodejs-mysql-crud">https://github.com/weijutu/nodejs-mysql-crud</a></p>
<p>那麼資料庫存取就先到這裡，接下來還有更多應用，敬請期待  ：）</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-08-mysql-crud-create/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-08-mysql-crud-create/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#8 - MySQL 操作 -建立</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:08:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:08:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>延續上一篇的連接 mysql  實現 crud 的操作，本篇將介紹新增資料的操作。之後的兩篇文，將會介紹更新、刪除的操作。首先我們在上一篇已經有將資料列出來，在此做一些畫面的調整，使用 bootstrap 的前端框架套件去使用。</p>
<p>本章節主要使用的套件有：</p>
<ul>
<li>express web framework</li>
<li>mysql</li>
<li>jade</li>
</ul>
<p>首先我們先建立一個資料夾  nodejs-demo-mysql ，然後要安裝一下相依的套件使用：express, mysql</p>
<p>建立 package.json，請輸入以下的指令按照提示問題回答</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> init</span><br></pre></td></tr></table></figure>


<p>安裝 express web framework 到這 nodejs-demo-mysql 應用程式專案裡面，並寫入到  package.json</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> install express —save</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/31.png"></p>
<p>完成 express 之後，再安裝 mysql 套件，在這邊安裝  mysql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> install mysql@2.0.0-alpha9</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/32.png"></p>
<p>首先可以看到 express 套件,  node-mysql 就新增到 node_modules 裡了</p>
<p><img data-src="/images/nodejs/33.png"></p>
<p>資料庫的部分，假定先建立一個 demo_nodejs 的資料庫</p>
<p><img data-src="/images/nodejs/34.png"></p>
<p>然後新增  index.js 作為網頁開頭的起始點，宣告 mysql 後，先使用 createConnection 方法將資料庫的參數初始化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> conn = mysql.<span class="title function_">createConnection</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">database</span>:<span class="string">&#x27;demo_nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3306</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>將資料庫做個連線的動作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn.<span class="title function_">connect</span>();</span><br></pre></td></tr></table></figure>

<p>先測試一下，透過以下的 query  執行，如果有將 12 + 34 有算出來，那麼就代表有連線成功</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conn.<span class="title function_">query</span>(<span class="string">&#x27;SELECT 12 + 34 AS result&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The result is: &#x27;</span>, rows[<span class="number">0</span>].<span class="property">result</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>連線成功後，查詢之後務必要將它關閉。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure>

<p>完整程式如下：</p>
<p><img data-src="/images/nodejs/35.png"></p>
<p>執行結果 有將 12 + 34 &#x3D; 46 算出來囉</p>
<p><img data-src="/images/nodejs/36.png"></p>
<h1 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h1><ul>
<li><a target="_blank" rel="noopener" href="http://expressjs.com/">http://expressjs.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/redblaze/node-mysql">https://github.com/redblaze/node-mysql</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-07-mysql-start/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-07-mysql-start/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#7 - 連接 MySQL 並實現 CRUD 操作存取前的準備</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:07:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:07:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天就來寫一個跟資料庫有關的功能，本章節介紹用 <code>node.js ＋ mysql</code>  的存取，實作新增、修改、刪除、查詢的功能，以下都是以  mac osx 來當作開發環境，因此以下步驟之前請務必安裝  <code>node.js</code> , npm，另外還有 <code>mysql</code> ，您可以透過 <a target="_blank" rel="noopener" href="http://dev.mysql.com/downloads/mysql/">http://dev.mysql.com/downloads/mysql/</a> 來安裝，mysql 安裝的步驟在此就不做介紹，專注在  node.js 與 mysql 存取的方法。</p>
<p>首先我們先建立一個資料夾  nodejs-demo-mysql ，然後要安裝一下相依的套件使用：express, mysql</p>
<p>建立 package.json，請輸入以下的指令按照提示問題回答</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> init</span><br></pre></td></tr></table></figure>

<p>安裝 express web framework 到這 nodejs-demo-mysql 應用程式專案裡面，並寫入到  package.json</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> install express —save</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/31.png"></p>
<p>完成 express 之後，再安裝 mysql 套件，在這邊安裝  mysql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> install mysql@2.0.0-alpha9</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/32.png"></p>
<p>首先可以看到 express 套件,  node-mysql 就新增到 node_modules 裡了</p>
<p><img data-src="/images/nodejs/33.png"></p>
<p>資料庫的部分，假定先建立一個 demo_nodejs 的資料庫</p>
<p><img data-src="/images/nodejs/34.png"></p>
<p>然後新增  index.js 作為網頁開頭的起始點，宣告 mysql 後，先使用 createConnection 方法將資料庫的參數初始化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> conn = mysql.<span class="title function_">createConnection</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">database</span>:<span class="string">&#x27;demo_nodejs&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3306</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>將資料庫做個連線的動作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn.<span class="title function_">connect</span>();</span><br></pre></td></tr></table></figure>

<p>先測試一下，透過以下的 query  執行，如果有將 12 + 34 有算出來，那麼就代表有連線成功</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conn.<span class="title function_">query</span>(<span class="string">&#x27;SELECT 12 + 34 AS result&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, rows, fields</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The result is: &#x27;</span>, rows[<span class="number">0</span>].<span class="property">result</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>連線成功後，查詢之後務必要將它關閉。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure>

<p>完整程式如下：</p>
<p><img data-src="/images/nodejs/35.png"></p>
<p>執行結果 有將 12 + 34 &#x3D; 46 算出來囉</p>
<p><img data-src="/images/nodejs/36.png"></p>
<h1 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h1><ul>
<li><a target="_blank" rel="noopener" href="http://expressjs.com/">http://expressjs.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/redblaze/node-mysql">https://github.com/redblaze/node-mysql</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-06-style-guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-06-style-guide/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#6 - 撰寫程式的風格指南 (Style Guide)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:06:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:06:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>由於 node.js 是 javascript 作為開發的語言，開發的過程遵照程式碼規範撰寫讓整個程式風格達到一致。不過當然許多的 js 寫法都會有不同的風格存在，若您找不到要照什麼規則編寫程式，那麼可以參考這篇簡易的風格指南作為開發上的基本基礎。</p>
<p>本章節將介紹  node.js 幾個常用的撰寫手法來做介紹：</p>
<ul>
<li>字串引號</li>
<li>區塊括號</li>
<li>變數宣告</li>
<li>變數命名</li>
<li>函數命名</li>
<li>物件與陣列</li>
<li>相等的運算符號</li>
<li>條件判斷</li>
<li>嵌套閉包</li>
</ul>
<h1 id="字串引號"><a href="#字串引號" class="headerlink" title="字串引號"></a>字串引號</h1><p>使用單引號，若物件是 json 格式，那麼就使用雙引號來定義 key, value</p>
<h3 id="錯誤示範"><a href="#錯誤示範" class="headerlink" title="錯誤示範"></a>錯誤示範</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name =“test01”;</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法"><a href="#正確寫法" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = ’test01’;</span><br></pre></td></tr></table></figure>

<h1 id="區塊括號"><a href="#區塊括號" class="headerlink" title="區塊括號"></a>區塊括號</h1><h3 id="錯誤示範-1"><a href="#錯誤示範-1" class="headerlink" title="錯誤示範"></a>錯誤示範</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(“<span class="variable language_">this</span> is a book.”);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法-1"><a href="#正確寫法-1" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(“<span class="variable language_">this</span> is a book.”);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="變數宣告"><a href="#變數宣告" class="headerlink" title="變數宣告"></a>變數宣告</h1><p>使用一種對每一個變數做一個 var 宣告。</p>
<h3 id="錯誤示範-2"><a href="#錯誤示範-2" class="headerlink" title="錯誤示範"></a>錯誤示範</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>],</span><br><span class="line">     price = [<span class="number">150</span>, <span class="number">125</span>],</span><br><span class="line">     obj = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法-2"><a href="#正確寫法-2" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> price = [<span class="number">150</span>, <span class="number">125</span>];</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="變數命名"><a href="#變數命名" class="headerlink" title="變數命名"></a>變數命名</h1><h3 id="錯誤示範-3"><a href="#錯誤示範-3" class="headerlink" title="錯誤示範"></a>錯誤示範</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str_user = <span class="string">&quot;test01&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法-3"><a href="#正確寫法-3" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strUser = <span class="string">&quot;test01&quot;</span>;</span><br></pre></td></tr></table></figure>

<h1 id="函數命名"><a href="#函數命名" class="headerlink" title="函數命名"></a>函數命名</h1><h3 id="錯誤示範-4"><a href="#錯誤示範-4" class="headerlink" title="錯誤示範"></a>錯誤示範</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">get_Users</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法-4"><a href="#正確寫法-4" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">GetUser</span>(<span class="params"></span>)&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="物件與陣列"><a href="#物件與陣列" class="headerlink" title="物件與陣列"></a>物件與陣列</h1><p>如果只有很小的資料為陣列的話，請將它寫在同一行，而當您的物件是包含 key, value 的形式時，則排列整齊讓閱讀起來更加容易</p>
<h3 id="錯誤寫法"><a href="#錯誤寫法" class="headerlink" title="錯誤寫法"></a>錯誤寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = [</span><br><span class="line">     <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123; <span class="string">&quot;name&quot;</span>, <span class="string">&quot;test01&quot;</span></span><br><span class="line">               , <span class="string">&quot;id&quot;</span>: <span class="string">&quot;abcd1234&quot;</span> &#125;;</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法-5"><a href="#正確寫法-5" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = [ <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span> ];</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">     <span class="string">&quot;name&quot;</span>, <span class="string">&quot;test01&quot;</span>,</span><br><span class="line">     <span class="string">&quot;id&quot;</span>: <span class="string">&quot;abcd1234&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="相等的運算符號"><a href="#相等的運算符號" class="headerlink" title="相等的運算符號"></a>相等的運算符號</h1><h3 id="錯誤寫法-1"><a href="#錯誤寫法-1" class="headerlink" title="錯誤寫法"></a>錯誤寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (index == <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;nothing&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法-6"><a href="#正確寫法-6" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> index = <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> (index === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;nothing&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="條件判斷"><a href="#條件判斷" class="headerlink" title="條件判斷"></a>條件判斷</h1><p>儘量不要將過多的判斷都塞在 if 裡面，請先將判斷部分在前面以變數方式先驗證，再將結果的 true, false 的答案擺在 if 裡面</p>
<h3 id="錯誤寫法-2"><a href="#錯誤寫法-2" class="headerlink" title="錯誤寫法"></a>錯誤寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (task.<span class="title function_">isPrivate</span>() || task.<span class="title function_">isEnabled</span>()) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;the task are private and enabled type&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法-7"><a href="#正確寫法-7" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isValid = (task.<span class="title function_">isPrivate</span>() || task.<span class="title function_">isEnabled</span>());</span><br><span class="line"><span class="keyword">if</span> (isValid) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;the task are private and enabled type&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="嵌套閉包"><a href="#嵌套閉包" class="headerlink" title="嵌套閉包"></a>嵌套閉包</h1><p>在使用閉包的做法是，不要一直無限嵌套，因為這樣會使得程式過度雜亂</p>
<h3 id="錯誤寫法-3"><a href="#錯誤寫法-3" class="headerlink" title="錯誤寫法"></a>錯誤寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">      obj.<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;click...&quot;</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="正確寫法-8"><a href="#正確寫法-8" class="headerlink" title="正確寫法"></a>正確寫法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     obj.<span class="title function_">click</span>(fnObjClick);</span><br><span class="line">&#125;,<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fnObjClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;click...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h1><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/felixge/node-style-guide">https://github.com/felixge/node-style-guide</a></li>
<li><a target="_blank" rel="noopener" href="http://nodeguide.com/style.html">http://nodeguide.com/style.html</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://weijutu.github.io/2017/07/24/nodejs/nodejs-05-bower/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Helen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丸匠筆記">
      <meta itemprop="description" content="天天吃番茄，天天有進步">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 丸匠筆記">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/24/nodejs/nodejs-05-bower/" class="post-title-link" itemprop="url">Node.js 系列學習日誌#5 - bower 管理相依套件工具</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-07-24 00:05:00" itemprop="dateCreated datePublished" datetime="2017-07-24T00:05:00+08:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-09-04 09:16:48" itemprop="dateModified" datetime="2022-09-04T09:16:48+08:00">2022-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
</div>

        </div>

        

      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img data-src="/images/nodejs/23.png"></p>
<p>『A package manager for the web』瀏覽器套件管理工具</p>
<p>一般在寫網頁時，多半會引入套件來使用，而 bower 就是用來管理相依套件工具，bower 是 twitter 研發，透過這樣的管理工具下載安裝 css, js 套件，讓開發者跟隨著這樣的工具，讓 web 套件 (例如： bootstrap, jquery… etc) 方面更好管理，更簡單的方式更新最新版本的套件。</p>
<p>當沒有管理的時候，你也許是…</p>
<ol>
<li>直接去官方網站抓檔案，還需要記得要下載 dev 版跟 min  壓縮過的版本 (例如：<a target="_blank" rel="noopener" href="https://code.jquery.com/jquery/">https://code.jquery.com/jquery/</a>)</li>
<li>找 cdn 檔案 (例如：<a target="_blank" rel="noopener" href="https://developers.google.com/speed/libraries/devguide?hl=zh-tw">https://developers.google.com/speed/libraries/devguide?hl=zh-tw</a>)</li>
<li>乾脆用現有的 (舊版本繼續沿用)</li>
</ol>
<p>以上的行為，多半會花一些時間一直找，而這套工具就是解決這樣的問題，只要用指令操作，效率高多囉！</p>
<p>本章節將學習到：</p>
<ul>
<li>安裝 bower</li>
<li>使用方法</li>
<li>使用 express, bower 建立 bootstrap 套件的前端頁面</li>
</ul>
<h1 id="安裝-bower"><a href="#安裝-bower" class="headerlink" title="安裝 bower"></a>安裝 bower</h1><p>(安裝之前務必要有 node.js, npm, 建議儲存在 global)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> install bower -g</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/24.png"></p>
<p>可以利用 Search Bower packages 頁面搜尋需要的套件：<a target="_blank" rel="noopener" href="http://bower.io/search/">http://bower.io/search/</a> ，或者用指令搜尋</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$bower</span> search bootstrap</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/25.png"></p>
<p>使用方法：</p>
<p>請先安裝 express 作為網頁框架，然後安裝套件的方式，在這邊安裝一下 bootstrap</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$bower</span> install bootstrap</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/26.png"></p>
<p>指令安裝之後就會看到 bootstrap 出現在 bower_components&#x2F;bootstrap&#x2F;<em>.</em> , bower_components&#x2F;jquery&#x2F;<em>.</em></p>
<p>透過 bower init 指令，安裝 bower.json，您可以在 dependencies 的部分輸入套件名稱與版本號</p>
<p><img data-src="/images/nodejs/27.png"></p>
<p>我們在建立好的 express 框架下的  app.js ，把剛才建立好的  bower_components  資料夾，綁進去基本靜態套件的路徑</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(path.join(__dirname, <span class="string">&#x27;bower_components/bootstrap/dist/&#x27;</span>)));</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/28.png"></p>
<p>接著用引入檔案的方法，請打開 .&#x2F;views&#x2F;layout.jade ，在 head 的子節點的地方新增</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">link(rel=&#x27;stylesheet&#x27;, href=&#x27;/css/bootstrap.min.css&#x27;)</span><br><span class="line">script(src=&#x27;/js/bootstrap.min.js&#x27;)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/nodejs/29.png"></p>
<p>引入成功之後，就可以建立一個 bootstrap 的頁面，下圖是用透過 bower 匯入 bootstrap 套件建立一個簡單前端頁面：</p>
<p><img data-src="/images/nodejs/30.png"></p>
<h1 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h1><ul>
<li><a target="_blank" rel="noopener" href="http://bower.io/">http://bower.io/</a></li>
<li><a target="_blank" rel="noopener" href="http://jade-lang.com/tutorial/">http://jade-lang.com/tutorial/</a></li>
<li><a target="_blank" rel="noopener" href="http://getbootstrap.com/">http://getbootstrap.com/</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Helen</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  




  <script src="/js/third-party/pace.js"></script>

  





</body>
</html>
